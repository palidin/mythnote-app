@tailwind base;
@tailwind components;
@tailwind utilities;

/* 自定义工具类 */
@layer utilities {
  /* 文本截断 */
  .text-title {
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
  }

  /* 允许选择文本 */
  .allow-copy {
    @apply select-text;
  }

  /* 隐藏 */
  .hide {
    @apply hidden;
  }
}

/* 基础样式重置 */
@layer base {
  * {
    @apply box-border;
  }

  body {
    @apply m-0 p-0;
  }

  html, body, #root {
    @apply h-full;
  }

  #root {
    @apply w-full;
  }

  button {
    @apply cursor-pointer;
  }

  button:hover {
    @apply cursor-pointer;
  }
}

/* 编辑器样式优化 */
@layer components {
  .note-content {
    button {
      @apply border-0;
    }

    button[aria-haspopup="dialog"] {
      @apply bg-transparent;
    }
  }


  /* 滚动条样式 - 确保内容区域和操作栏宽度一致 */
  .scrollbar-gutter-stable {
    scrollbar-gutter: stable;
  }

  /* rc-dialog 按钮样式（确认 / 取消） */
  .btn {
    @apply inline-block font-normal text-center align-middle bg-transparent border border-transparent
      px-3 py-1.5 text-sm leading-6 rounded;
    color: #212529;
  }

  .btn-primary {
    @apply text-white;
    background-color: #007bff;
    border-color: #007bff;
  }

  .rc-dialog-footer .btn + .btn {
    margin-left: 5px;
    margin-bottom: 0;
  }

  /* 右键菜单项样式（中间列表的菜单） */
  .szh-menu__item {
    @apply flex items-center relative py-1.5 px-6;
  }
}

/* 自定义滚动条样式 */
@layer utilities {
  /* 为左侧栏添加滚动条样式，确保宽度一致 */
  .left-scrollbar-fix::-webkit-scrollbar {
    width: 8px;
  }

  .left-scrollbar-fix::-webkit-scrollbar-track {
    background: transparent;
  }

  .left-scrollbar-fix::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
  }

  .left-scrollbar-fix::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }
}

#root {
  .szh-menu__item {
    display: flex;
    align-items: center;
    position: relative;
    padding: .375rem 1.5rem;
  }


  .milkdown .ProseMirror {
    padding:  20px 30px;
    min-height: 100%;
    margin-bottom: 30px;
  }


  div[data-milkdown-root]{
    background: #fff;
    min-height: 100%;
  }

  .editor-wrapper{
    min-height: 100%;
  }
}


/* Tiptap 根元素 */
.tiptap {
  line-height: 1.6;
  outline: none;
  color: #1f2328;

  &:focus {
    outline: none !important;
  }

  /* 段落 */
  p {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;

    &.is-editor-empty:first-child::before {
      color: #adb5bd;
      content: attr(data-placeholder);
      float: left;
      height: 0;
      pointer-events: none;
    }
  }

  /* 标题 */
  h1,
  h2,
  h3 {
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
    font-weight: 600;
    line-height: 1.25;
  }

  /* 第一行元素去掉顶部间距 */
  > *:first-child {
    margin-top: 0 !important;
  }

  /* 列表 */
  ul,
  ol {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    padding-left: 1.5rem;
  }

  li {
    p {
      margin-top: 0.1rem;
      margin-bottom: 0.1rem;
    }
  }

  /* 表格 */
  table {
    border-collapse: collapse;
    table-layout: fixed;
    width: 100%;
    margin: 1rem 0;
    overflow: hidden;

    td,
    th {
      min-width: 1em;
      border: 1px solid #ced4da;
      padding: 6px 10px;
      vertical-align: top;
      box-sizing: border-box;
      position: relative;
    }

    th {
      font-weight: bold;
      text-align: left;
      background-color: #f8f9fa;
    }

    p {
      margin: 0;
    }
  }

  /* 表格选中单元格高亮 */
  .selectedCell::after {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(200, 200, 255, 0.4);
    pointer-events: none;
    z-index: 2;
  }

  /* 链接 */
  a {
    color: #0969da;
    text-decoration: underline;
  }
}

/* 任务列表 */
ul[data-type="taskList"] {
  list-style: none;
  padding: 0;

  li {
    display: flex;
    align-items: flex-start;
    margin-bottom: 0.5rem;
  }

  label {
    margin-right: 0.5rem;
    user-select: none;
  }
}
